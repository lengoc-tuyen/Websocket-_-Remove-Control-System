<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8" />
    <title>Trang ch√≠nh ‚Äì Christmas LAN Remote</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="css/style.css" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/microsoft-signalr/8.0.0/signalr.min.js"></script>
</head>
<body>
<header>
    <div class="app-title">
        üéÑ <span>Christmas</span> LAN Remote
    </div>
    <div class="header-right">
        <div class="ip-label">
            Server IP: <input id="serverIpInput" value="192.168.1.99" placeholder="Nh·∫≠p IP (vd: 192.168.1.5)" style="background:transparent; border:none; color:white; width: 140px; outline: none; font-weight: bold;" />
        </div>
        <div id="connectionStatus" style="display: flex; align-items: center; gap: 5px;">
            <span id="statusDot" class="status-dot status-disconnected"></span>
            <span id="statusText">Disconnected</span>
        </div>
        <button id="toggleConnectBtn" class="btn btn-primary">K·∫øt n·ªëi</button>
    </div>
</header>

<div class="layout">
    <main>
        <div class="section-header">
            <div>ƒêang ƒëi·ªÅu khi·ªÉn: <strong id="currentDeviceName">Server LAN</strong></div>
            <small>Christmas Edition ‚Ä¢ WebSocket Realtime Control</small>
        </div>

        <div class="tabs">
            <button class="tab-btn active" data-target="appsSection"><span class="tab-icon">üì¶</span> App</button>
            <button class="tab-btn" data-target="processesSection"><span class="tab-icon">‚öô</span> Process</button>
            <button class="tab-btn" data-target="screenSection"><span class="tab-icon">üñ•</span> Screen</button>
            <button class="tab-btn" data-target="keysSection"><span class="tab-icon">‚å®</span> Keylog</button>
            <button class="tab-btn" data-target="webcamSection"><span class="tab-icon">üì∑</span> Webcam</button>
            <button class="tab-btn" data-target="powerSection"><span class="tab-icon">üîå</span> Power</button>
        </div>

        <div class="tab-content">
            <section id="appsSection" style="flex:1;">
                <div class="gift-box active">
                    <div class="gift-inner">
                        <h2 style="font-size:15px; margin-bottom:6px;">üì¶ Qu·∫£n l√Ω ·ª©ng d·ª•ng (List / Start / Stop)</h2>
                        <div class="section-actions">
                            <button class="btn btn-primary btn-sm" id="refreshAppsBtn">L·∫•y danh s√°ch App</button>
                            <input type="text" id="appNameInput" placeholder="T√™n App (vd: notepad)" class="text-black px-2 py-1 rounded text-sm" style="width: 150px;">
                            <button class="btn btn-outline btn-sm" id="startAppBtn">Start App</button>
                            <button class="btn btn-outline btn-sm" id="stopSelectedAppBtn">Stop App ƒë√£ ch·ªçn</button>
                        </div>
                        <div style="max-height: 400px; overflow-y: auto; margin-top: 10px;">
                            <table>
                                <thead>
                                <tr>
                                    <th style="width:30px;">Ch·ªçn</th>
                                    <th>PID</th>
                                    <th>T√™n ·ª©ng d·ª•ng</th>
                                    <th>Ti√™u ƒë·ªÅ c·ª≠a s·ªï</th>
                                    <th>RAM (MB)</th>
                                </tr>
                                </thead>
                                <tbody id="appsTableBody"></tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </section>

            <section id="processesSection" style="display:none; flex:1;">
                <div class="gift-box">
                    <div class="gift-inner">
                        <h2 style="font-size:15px; margin-bottom:6px;">‚öô Qu·∫£n l√Ω ti·∫øn tr√¨nh (List / Stop)</h2>
                        <div class="section-actions">
                            <button class="btn btn-primary btn-sm" id="refreshProcessesBtn">L·∫•y danh s√°ch Process</button>
                            <button class="btn btn-outline btn-sm" id="stopSelectedProcessBtn">Stop Process</button>
                        </div>
                        <div style="max-height: 400px; overflow-y: auto; margin-top: 10px;">
                            <table>
                                <thead>
                                <tr>
                                    <th style="width:30px;">Ch·ªçn</th>
                                    <th>PID</th>
                                    <th>T√™n ti·∫øn tr√¨nh</th>
                                    <th>RAM (MB)</th>
                                </tr>
                                </thead>
                                <tbody id="processesTableBody"></tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </section>

            <section id="screenSection" style="display:none; flex:1;">
                <div class="gift-box">
                    <div class="gift-inner">
                        <h2 style="font-size:15px; margin-bottom:6px;">üñ• Ch·ª•p m√†n h√¨nh t·ª´ xa</h2>
                        <div class="section-actions">
                            <button class="btn btn-primary btn-sm" id="captureScreenBtn">Ch·ª•p m√†n h√¨nh (Snapshot)</button>
                        </div>
                        <div style="text-align:center;">
                            <img id="screenPreview" src="" alt="Ch∆∞a c√≥ ·∫£nh m√†n h√¨nh..." />
                        </div>
                    </div>
                </div>
            </section>

            <section id="keysSection" style="display:none; flex:1;">
                <div class="gift-box">
                    <div class="gift-inner">
                        <h2 style="font-size:15px; margin-bottom:6px;">‚å® Keylogger</h2>
                        <div class="section-actions">
                            <button class="btn btn-primary btn-sm" id="startKeylogBtn">B·∫Øt ƒë·∫ßu</button>
                            <button class="btn btn-outline btn-sm" id="stopKeylogBtn">D·ª´ng</button>
                            <button class="btn btn-outline btn-sm" id="clearKeylogBtn">Xo√° log</button>
                        </div>
                        <textarea id="keylogArea" readonly class="w-full h-64 border p-2 bg-gray-900 text-green-400 font-mono text-sm rounded resize-none mt-2"></textarea>
                    </div>
                </div>
            </section>

            <section id="webcamSection" style="display:none; flex:1;">
                <div class="gift-box">
                    <div class="gift-inner">
                        <h2 style="font-size:15px; margin-bottom:6px;">üì∑ Webcam (Quay b·∫±ng ch·ª©ng 3s)</h2>
                        <div class="section-actions">
                            <button class="btn btn-primary btn-sm" id="webcamOnBtn">M·ªü Cam & Quay 3s</button>
                            <button class="btn btn-outline btn-sm" id="webcamOffBtn">T·∫Øt Cam</button>
                        </div>
                        <div style="min-height: 300px; background: #000; display:flex; align-items:center; justify-content:center; margin-top: 10px; border-radius: 8px;">
                            <img id="webcamPreview" src="" style="max-width:100%; max-height:340px;" alt="Video Stream" />
                        </div>
                    </div>
                </div>
            </section>

            <section id="powerSection" style="display:none; flex:1;">
                <div class="gift-box">
                    <div class="gift-inner">
                        <h2 style="font-size:15px; margin-bottom:6px;">üîå ƒêi·ªÅu khi·ªÉn ngu·ªìn</h2>
                        <div style="display: flex; gap: 20px; margin-top: 20px;">
                            <div style="flex:1; background:#020617; padding:15px; border-radius:12px; border:1px dashed #facc15;">
                                <h3 style="color:#facc15; margin-bottom:10px;">Restart</h3>
                                <p style="font-size:13px; color:#9ca3af; margin-bottom:15px;">Kh·ªüi ƒë·ªông l·∫°i m√°y Server.</p>
                                <button class="btn btn-warning btn-sm" id="restartBtn" style="width:100%">G·ª≠i l·ªánh Restart</button>
                            </div>
                            <div style="flex:1; background:#020617; padding:15px; border-radius:12px; border:1px dashed #ef4444;">
                                <h3 style="color:#ef4444; margin-bottom:10px;">Shutdown</h3>
                                <p style="font-size:13px; color:#9ca3af; margin-bottom:15px;">T·∫Øt m√°y Server ho√†n to√†n.</p>
                                <button class="btn btn-danger btn-sm" id="shutdownBtn" style="width:100%">G·ª≠i l·ªánh Shutdown</button>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
        </div>
    </main>
</div>

<div class="status-bar">
    <span id="statusBarText">S·∫µn s√†ng k·∫øt n·ªëi...</span>
    <span id="lastUpdated" style="color: #9ca3af;"></span>
</div>

<script src="js/ui.js"></script>
<script src="js/connection.js"></script>
</body>
</html>
